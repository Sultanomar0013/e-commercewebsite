{"ast":null,"code":"import jwt_decode from 'jwt-decode';\nexport const authenticate = (token, cb) => {\n  if (typeof window !== 'undefined') {\n    localStorage.setItem('jwt', JSON.stringify(token));\n    cb();\n  }\n};\nexport const isAuthenticated = () => {\n  if (typeof window === 'undefined') return false;\n\n  if (localStorage.getItem('jwt')) {\n    const {\n      exp\n    } = jwt_decode(JSON.parse(localStorage.getItem('jwt')));\n\n    if (new Date().getTime() < exp * 1000) {\n      return true;\n    } else {\n      localStorage.removeItem('jwt');\n      return false;\n    }\n  } else return false;\n};\nexport const userInfo = () => {\n  const jwt = JSON.parse(localStorage.getItem('jwt'));\n  const decoded = jwt_decoded(jwt);\n  return { ...decoded,\n    token: jwt\n  };\n};\nexport const signout = cb => {\n  if (typeof window !== 'undefined') {\n    localStorage.removeItem('jwt');\n    cb();\n  }\n};","map":{"version":3,"names":["jwt_decode","authenticate","token","cb","window","localStorage","setItem","JSON","stringify","isAuthenticated","getItem","exp","parse","Date","getTime","removeItem","userInfo","jwt","decoded","jwt_decoded","signout"],"sources":["D:/e-commerce/e-com-frontend/src/utils/auth.js"],"sourcesContent":["import jwt_decode from 'jwt-decode';\r\n\r\nexport const authenticate = (token, cb) => {\r\n    if (typeof window !== 'undefined'){\r\n        localStorage.setItem('jwt', JSON.stringify(token));\r\n        cb();\r\n    }\r\n}\r\n\r\nexport const isAuthenticated = () => {\r\n    if(typeof window === 'undefined') return false;\r\n    if(localStorage.getItem('jwt')) {\r\n        const { exp }=jwt_decode(JSON.parse(localStorage.getItem('jwt')));\r\n        if ((new Date()).getTime()< exp*1000){\r\n            return true;\r\n        } else{\r\n            localStorage.removeItem('jwt');\r\n            return false;\r\n        }\r\n    } else return false;\r\n}\r\n\r\nexport const userInfo = () => {\r\n    const jwt = JSON.parse(localStorage.getItem('jwt'));\r\n    const decoded = jwt_decoded(jwt);\r\n    return{ ...decoded,  token: jwt}\r\n}\r\n\r\nexport const signout = cb =>{\r\n    if(typeof window !=='undefined'){\r\n        localStorage.removeItem('jwt');\r\n        cb();\r\n    }\r\n}"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,YAAvB;AAEA,OAAO,MAAMC,YAAY,GAAG,CAACC,KAAD,EAAQC,EAAR,KAAe;EACvC,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAkC;IAC9BC,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BC,IAAI,CAACC,SAAL,CAAeN,KAAf,CAA5B;IACAC,EAAE;EACL;AACJ,CALM;AAOP,OAAO,MAAMM,eAAe,GAAG,MAAM;EACjC,IAAG,OAAOL,MAAP,KAAkB,WAArB,EAAkC,OAAO,KAAP;;EAClC,IAAGC,YAAY,CAACK,OAAb,CAAqB,KAArB,CAAH,EAAgC;IAC5B,MAAM;MAAEC;IAAF,IAAQX,UAAU,CAACO,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACK,OAAb,CAAqB,KAArB,CAAX,CAAD,CAAxB;;IACA,IAAK,IAAIG,IAAJ,EAAD,CAAaC,OAAb,KAAwBH,GAAG,GAAC,IAAhC,EAAqC;MACjC,OAAO,IAAP;IACH,CAFD,MAEM;MACFN,YAAY,CAACU,UAAb,CAAwB,KAAxB;MACA,OAAO,KAAP;IACH;EACJ,CARD,MAQO,OAAO,KAAP;AACV,CAXM;AAaP,OAAO,MAAMC,QAAQ,GAAG,MAAM;EAC1B,MAAMC,GAAG,GAAGV,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACK,OAAb,CAAqB,KAArB,CAAX,CAAZ;EACA,MAAMQ,OAAO,GAAGC,WAAW,CAACF,GAAD,CAA3B;EACA,OAAM,EAAE,GAAGC,OAAL;IAAehB,KAAK,EAAEe;EAAtB,CAAN;AACH,CAJM;AAMP,OAAO,MAAMG,OAAO,GAAGjB,EAAE,IAAG;EACxB,IAAG,OAAOC,MAAP,KAAiB,WAApB,EAAgC;IAC5BC,YAAY,CAACU,UAAb,CAAwB,KAAxB;IACAZ,EAAE;EACL;AACJ,CALM"},"metadata":{},"sourceType":"module"}